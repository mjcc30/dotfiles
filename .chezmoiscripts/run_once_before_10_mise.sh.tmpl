#!/bin/bash

run_mise() {
  mise doctor
  mise install
}

{{ if eq .chezmoi.os "darwin" }}
brew install mise
{{ end }}

{{ if eq .chezmoi.os "linux" }}

{{ if eq .osid "linux-debian" }}
echo "Install mise on Linux"
sudo apt-get update
sudo apt-get install -y curl
curl https://mise.run | sh
{{ end }}

{{ if eq .osid "linux-fedora" }}
# Fedora-specific code
{{ else }}
curl https://mise.run | sh
{{ end }}

{{ else }}
echo "Unsupported OS"
exit 1
{{ end }}

run_mise
echo "Mise installation complete."
